meta:
  id: catalog
  version: 0.1.0
  owner: Catalog Team

glossary:
  - id: Brand
    name: Brand
    definition: "A label/manufacturer under which products are marketed."
  - id: Product
    name: Product
    definition: "A marketable item belonging to exactly one Brand."
  - id: Variant
    name: Variant
    definition: "A purchasable option of a Product (e.g., size/color)."

lifecycles:
  Product:
    states: ["Draft", "Active", "Discontinued"]
    transitions:
      - "Draft -> Active"
      - "Active -> Discontinued"

invariants:
  - id: unique-model-code-per-brand
    rule: "Within the same Brand, no two Active Products share the same modelCode."
  - id: variant-sku-unique-per-product
    rule: "A Product's Variant SKUs are unique within that Product."

events:
  - id: ProductProposed
    name: ProductProposed
    definition: "ProductProposed(subject: Product, occurred: Time)"
  - id: ProductActivated
    name: ProductActivated
    definition: "ProductActivated(subject: Product, occurred: Time)"
  - id: ProductDiscontinued
    name: ProductDiscontinued
    definition: "ProductDiscontinued(subject: Product, occurred: Time)"
  - id: ModelCodeReassigned
    name: ModelCodeReassigned
    definition: "ModelCodeReassigned(subject: Product, occurred: Time)"