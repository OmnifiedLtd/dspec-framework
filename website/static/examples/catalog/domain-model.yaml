meta:
  id: catalog
  owner: Catalog Team

glossary:
  - id: brand
    name: Brand
    definition: "A label/manufacturer under which products are marketed."
  - id: product
    name: Product
    definition: "A marketable item belonging to exactly one Brand."
  - id: variant
    name: Variant
    definition: "A purchasable option of a Product (e.g., size/color)."

lifecycles:
  - id: product
    states: 
      - id: draft
        name: Draft
      - id: active
        name: Active
      - id: discontinued
        name: Discontinued
    transitions:
      - from: draft
        to: active
        trigger: product-activated
      - from: active
        to: discontinued
        trigger: product-discontinued

invariants:
  - id: unique-model-code-per-brand
    rule: "Within the same Brand, no two Active Products share the same modelCode."
  - id: variant-sku-unique-per-product
    rule: "A Product's Variant SKUs are unique within that Product."

events:
  - id: product-proposed
    name: ProductProposed
    definition: "ProductProposed(subject: Product, occurred: Time)"
    subject_ref: product
  - id: product-activated
    name: ProductActivated
    definition: "ProductActivated(subject: Product, occurred: Time)"
    subject_ref: product
  - id: product-discontinued
    name: ProductDiscontinued
    definition: "ProductDiscontinued(subject: Product, occurred: Time)"
    subject_ref: product
  - id: model-code-reassigned
    name: ModelCodeReassigned
    definition: "ModelCodeReassigned(subject: Product, occurred: Time)"
    subject_ref: product