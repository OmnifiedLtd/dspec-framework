"use strict";(self.webpackChunkdocusaurus_tailwind_shadcn_template=self.webpackChunkdocusaurus_tailwind_shadcn_template||[]).push([["4612"],{73980:function(e,n,t){t.r(n),t.d(n,{metadata:()=>i,default:()=>u,frontMatter:()=>a,contentTitle:()=>o,toc:()=>c,assets:()=>l});var i=JSON.parse('{"id":"level-0-feature-dspec","title":"Level-0 Feature dspec","description":"---","source":"@site/docs/08-level-0-feature-dspec.md","sourceDirName":".","slug":"/level-0-feature-dspec","permalink":"/dspec-framework/docs/level-0-feature-dspec","draft":false,"unlisted":false,"editUrl":"https://github.com/OmnifiedLtd/dspec-framework/tree/main/docs/08-level-0-feature-dspec.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"layout":"default","title":"Level-0 Feature dspec","nav_order":9},"sidebar":"tutorialSidebar","previous":{"title":"Spec Levels at a Glance","permalink":"/dspec-framework/docs/spec-levels-at-a-glance"},"next":{"title":"Level-1 Design dspec","permalink":"/dspec-framework/docs/level-1-design-dspec"}}'),s=t(74848),r=t(84429);let a={layout:"default",title:"Level-0 Feature dspec",nav_order:9},o="Level\u20110 \u2014 Feature dspec (Conceptual)",l={},c=[{value:"Simple Example: Passwordless Login (Level\u20110)",id:"simple-example-passwordless-login-level0",level:3},{value:"Grouping Scope Items",id:"grouping-scope-items",level:3},{value:"Product Catalog: Brand/Product/Variant (Feature)",id:"product-catalog-brandproductvariant-feature",level:3}];function d(e){let n={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"level0--feature-dspec-conceptual",children:"Level\u20110 \u2014 Feature dspec (Conceptual)"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u{1F4A1} Tip: Varying Consistency Demands"})}),"\n",(0,s.jsxs)(n.p,{children:["While a ",(0,s.jsx)(n.strong,{children:"Domain Invariant"})," represents a universal business rule within its Bounded Context, the ",(0,s.jsx)(n.strong,{children:"Consistency Demand"})," specified in a Level\u20110 Feature dspec acknowledges that its enforcement ",(0,s.jsx)(n.em,{children:"strictness"})," can vary depending on the feature's specific context, user experience requirements, and the cost of violation versus the cost of enforcement."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:'Example: "Unique Username" Invariant'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Invariant:"})," ",(0,s.jsx)(n.code,{children:"Username must be unique across all active user accounts."})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Feature A: New User Registration"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Context:"})," A user signs up interactively."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consistency Demand:"})," ",(0,s.jsx)(n.code,{children:"strength: write-time"})," (or ",(0,s.jsx)(n.code,{children:"read-your-write"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Justification:"})," The system must immediately verify username uniqueness and provide feedback. A temporary violation (allowing a duplicate to exist for even a short period) would lead to a poor user experience and data integrity issues. The cost of a strict, synchronous check is acceptable."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Feature B: Bulk User Import (Enterprise Migration)"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Context:"})," Importing 100,000 users from a legacy system."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consistency Demand:"})," ",(0,s.jsx)(n.code,{children:"strength: eventual"})," (or ",(0,s.jsx)(n.code,{children:"tolerance: \u2264 PT1H"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Justification:"})," Performing 100,000 synchronous, strict uniqueness checks would be prohibitively slow and potentially cause timeouts. The business might accept that duplicate usernames could temporarily exist in the system during the import process, with a background job resolving conflicts (e.g., appending numbers to make them unique: ",(0,s.jsx)(n.code,{children:"john.doe_1"}),", ",(0,s.jsx)(n.code,{children:"john.doe_2"}),"). The cost of temporary violation is low compared to the cost of strict enforcement for this specific bulk operation."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This distinction allows DSpec to capture the ideal state (the invariant) while also specifying pragmatic, feature-specific enforcement requirements."}),"\n",(0,s.jsx)(n.h3,{id:"simple-example-passwordless-login-level0",children:"Simple Example: Passwordless Login (Level\u20110)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"meta:\n  id: feature.passwordless-login\n  name: Passwordless login via magic link\n  owner: Identity Team\n  domain_id: identity\n\nintent: >\n  Allow users to authenticate without passwords by sending a time-bound,\n  single-use magic link to a verified address.\n\nscope:\n  in:\n    - id: scope.request\n      statement: 'request link'\n    - id: scope.deliver\n      statement: 'deliver link'\n    - id: scope.redeem\n      statement: 'redeem link to authenticate'\n  out:\n    - id: scope.mfa\n      statement: 'MFA enrollment'\n    - id: scope.recovery\n      statement: 'account recovery'\n    - id: excl.sms\n      statement: 'No SMS links'\n      explicit: true  # Deliberate design decision, not just out of scope\n\ndomain_invariants:\n  - id: link-single-use\n    moment_of_truth: 'magic-link-redeemed'\n    consistency_demand:\n      scope: 'link'\n      strength: 'write-time'\n      tolerance: 'none'\n  - id: link-expiry\n    moment_of_truth: 'magic-link-redeemed'\n    consistency_demand:\n      scope: 'link'\n      strength: 'write-time'\n      tolerance: 'none'\n\npolicy_and_regulatory:\n  - id: policy.privacy\n    statement: 'Respect user notification preferences.'\n\nenvironmental_constraints:\n  - id: constr.delivery\n    statement: 'Email delivery can be delayed; UX must handle late arrivals.'\n\nacceptance_criteria:\n  - id: ac-001\n    statement: 'Valid, unexpired link authenticates the intended user.'\n  - id: ac-002\n    statement: 'Redeeming an already-used link fails with a harmless error.'\n  - id: ac-003\n    statement: 'Expired link cannot authenticate.'\n\nquality_criteria:\n  - id: qc.latency\n    statement: 'P95 link delivery confirmation \u2264 60s (staging).'\n\nverification:\n  type: 'executable'\n  artifacts: ['tests/identity/passwordless-login.feature']\n\ndependencies:\n  upstream: ['feature.user-verification']\n  downstream: ['feature.session-issuance']\n"})}),"\n",(0,s.jsx)(n.h3,{id:"grouping-scope-items",children:"Grouping Scope Items"}),"\n",(0,s.jsxs)(n.p,{children:["For complex features, you can organize scope items into groups to improve readability. You can mix individual items and groups within the same ",(0,s.jsx)(n.code,{children:"in"})," or ",(0,s.jsx)(n.code,{children:"out"})," list."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"scope:\n  in:\n    - id: scope.login.basic\n      statement: 'Standard username/password login'\n\n    - id: group.social-login\n      name: 'Social Login Providers'\n      description: 'Support for third-party authentication'\n      items:\n        - id: scope.login.google\n          statement: 'Login with Google'\n        - id: scope.login.github\n          statement: 'Login with GitHub'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"product-catalog-brandproductvariant-feature",children:"Product Catalog: Brand/Product/Variant (Feature)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(9214).A+"",children:["See full example in ",(0,s.jsx)(n.code,{children:"examples/catalog/level0.yaml"})]})})]})}function u(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},9214:function(e,n,t){t.d(n,{A:()=>i});let i=t.p+"assets/files/level0-3c9a043e7cf12c2252d27a7d4439d2e8.yaml"},84429:function(e,n,t){t.d(n,{R:()=>a,x:()=>o});var i=t(96540);let s={},r=i.createContext(s);function a(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);