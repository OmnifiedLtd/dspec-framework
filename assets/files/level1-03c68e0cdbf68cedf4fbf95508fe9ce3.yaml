extends: feature.ecommerce # Placeholder since no Level-0 exists

bounded_context: ecommerce
consistency_groups:
  - id: order
    name: Order
  - id: payment_intent
    name: PaymentIntent
commands:
  - id: submit_order
    name: SubmitOrder
    target: order
    intent: 'Move Draft -> Submitted and fix priced snapshot'
    preconditions: []
    postconditions:
      emits: ['order_submitted']
      transitions: ['draft -> submitted']

  - id: confirm_order
    name: ConfirmOrder
    target: order
    intent: 'Confirm when reservations are sufficient'
    preconditions: ['reservation_before_confirm']
    postconditions:
      emits: ['order_confirmed']
      transitions: ['submitted -> confirmed']

  - id: capture_payment
    name: CapturePayment
    target: payment_intent
    intent: 'Capture funds up to authorized amount'
    preconditions: ['capture_not_exceed_authorize']
    postconditions:
      emits: ['payment_captured']