meta:
  id: catalog
  version: 0.1.0
  owner: Catalog Team

glossary:
  - id: brand
    name: Brand
    definition: "A label/manufacturer under which products are marketed."
  - id: product
    name: Product
    definition: "A marketable item belonging to exactly one Brand."
  - id: variant
    name: Variant
    definition: "A purchasable option of a Product (e.g., size/color)."

lifecycles:
  product:
    states: ["draft", "active", "discontinued"]
    transitions:
      - "draft -> active"
      - "active -> discontinued"

invariants:
  - id: unique-model-code-per-brand
    rule: "Within the same Brand, no two Active Products share the same modelCode."
  - id: variant-sku-unique-per-product
    rule: "A Product's Variant SKUs are unique within that Product."

events:
  - id: product-proposed
    name: ProductProposed
    definition: "ProductProposed(subject: Product, occurred: Time)"
  - id: product-activated
    name: ProductActivated
    definition: "ProductActivated(subject: Product, occurred: Time)"
  - id: product-discontinued
    name: ProductDiscontinued
    definition: "ProductDiscontinued(subject: Product, occurred: Time)"
  - id: model-code-reassigned
    name: ModelCodeReassigned
    definition: "ModelCodeReassigned(subject: Product, occurred: Time)"