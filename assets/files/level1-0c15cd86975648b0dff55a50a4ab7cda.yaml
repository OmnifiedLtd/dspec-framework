extends: feature.ecommerce # Placeholder since no Level-0 exists

bounded_context: ecommerce
consistency_groups:
  - id: order
    name: Order
  - id: payment-intent
    name: PaymentIntent
commands:
  - id: submit-order
    name: SubmitOrder
    target: order
    intent: 'Move Draft -> Submitted and fix priced snapshot'
    preconditions: []
    postconditions:
      emits: ['order-submitted']
      transitions: ['draft -> submitted']

  - id: confirm-order
    name: ConfirmOrder
    target: order
    intent: 'Confirm when reservations are sufficient'
    preconditions: ['reservation-before-confirm']
    postconditions:
      emits: ['order-confirmed']
      transitions: ['submitted -> confirmed']

  - id: capture-payment
    name: CapturePayment
    target: payment-intent
    intent: 'Capture funds up to authorized amount'
    preconditions: ['capture-not-exceed-authorize']
    postconditions:
      emits: ['payment-captured']