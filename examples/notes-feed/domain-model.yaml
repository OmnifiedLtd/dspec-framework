meta:
  id: notes-domain
  version: 0.1.0
  owner: Social Team

glossary:
  - id: User
    name: User
    definition: "A registered participant in the system."
  - id: Note
    name: Note
    definition: "A short text message created by a User."
  - id: Feed
    name: Feed
    definition: "A reverse-chronological collection of Notes created by a specific User."

lifecycles:
  Note:
    states: 
      - "Draft"
      - "Published"
      - "Deleted"
    transitions:
      - "Draft -> Published"
      - "Published -> Deleted"
      - "Draft -> Deleted"

invariants:
  - id: note-author-ownership
    rule: "A Note belongs to exactly one Author (User) and cannot be reassigned."
  - id: note-length-limit
    rule: "A Note's content must not exceed 280 characters."
  - id: author-modification-only
    rule: "Only the Author of a Note may modify its content or state."

events:
  - id: NoteCreated
    name: NoteCreated
    definition: "NoteCreated(subject: Note, author: User, occurred: Time)"
  - id: NotePublished
    name: NotePublished
    definition: "NotePublished(subject: Note, occurred: Time)"
  - id: NoteContentUpdated
    name: NoteContentUpdated
    definition: "NoteContentUpdated(subject: Note, occurred: Time)"
  - id: NoteDeleted
    name: NoteDeleted
    definition: "NoteDeleted(subject: Note, occurred: Time)"