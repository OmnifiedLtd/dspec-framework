extends: feature.ecommerce # Placeholder since no Level-0 exists

bounded_context: ecommerce
consistency_groups:
  - id: Order
    name: Order
  - id: PaymentIntent
    name: PaymentIntent
commands:
  - id: SubmitOrder
    name: SubmitOrder
    target: Order
    intent: 'Move Draft -> Submitted and fix priced snapshot'
    preconditions: []
    postconditions:
      emits: ['OrderSubmitted']
      transitions: ['Draft -> Submitted']

  - id: ConfirmOrder
    name: ConfirmOrder
    target: Order
    intent: 'Confirm when reservations are sufficient'
    preconditions: ['reservation-before-confirm']
    postconditions:
      emits: ['OrderConfirmed']
      transitions: ['Submitted -> Confirmed']

  - id: CapturePayment
    name: CapturePayment
    target: PaymentIntent
    intent: 'Capture funds up to authorized amount'
    preconditions: ['capture-not-exceed-authorize']
    postconditions:
      emits: ['PaymentCaptured']